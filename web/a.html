<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="soli"></div>
<script src="/js/jquery-3.2.1.min.js"></script>
<style>
    p{
        position: absolute;
        top: 0;
        left:0;
    }
</style>
<script>
    $(function () {
        console.log("kaishi");
        $.ajax({
            url:"/index.php?r=app/tvlistings",
            type:"get",
            success:function (result,status,xhr) {
                var html = '';
                var timeCount = 0;
                var timeOver = 0;
                for(i=0;i<result.length;i++){
                    console.log(result[i]);
                    //"name":"203fb80e7bec54e7ce6c5131b3389b504fc26a19.jpg",
                    // "path":"http://a.com/uploders/image/2017/07/01/5e39d786890f788a1b2a9de3c10dbe4a.jpg",
                    // "type":"image/jpeg",
                    // "pay_time":5
                    if(i == 0){
                        html+="<p id='imgId_"+i+"' style='display: none;'><img src='"+ result[i].path+"'><time>"+(timeCount=0)+"</time></p>";
                        console.log(timeCount);
                        setTimeout("imgId('imgId_"+i+"')",timeCount);
                    }else{
                        html+="<p id='imgId_"+i+"' style='display: none;'><img src='"+ result[i].path+"'><time>"+(timeCount+=(result[i-1].pay_time*1000))+"</time></p>";
                        console.log(timeCount);
                        setTimeout("imgId('imgId_"+i+"')",timeCount);
                    }
                }
                $("#soli").append(html);
                console.log("timeCount："+timeCount);
                console.log("timeOver："+timeOver);
//                console.log(result);
//                console.log(result.length);
            }
        });
    });
    function imgId(id) {
        var trueId = "#"+id;
        console.log(trueId);
//        $("p").hide();
        $(trueId).show(2000);
    }
</script>
</body>
</html>